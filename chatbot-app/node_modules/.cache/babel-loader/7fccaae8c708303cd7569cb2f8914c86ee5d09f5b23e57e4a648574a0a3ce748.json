{"ast":null,"code":"import React,{useState}from'react';import{useOpenAI}from'../hooks/useOpenAI';import{KeyIcon,CheckCircleIcon,XCircleIcon}from'@heroicons/react/24/outline';import ErrorAlert from'./ErrorAlert';import LoadingSpinner from'./LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OpenAISettings=_ref=>{let{onClose}=_ref;const{apiKey,isValidKey,isLoading,error,setApiKey,validateKey,resetError}=useOpenAI();const[key,setKey]=useState(apiKey);const[isSaving,setIsSaving]=useState(false);const[showKey,setShowKey]=useState(false);const handleSave=async()=>{if(key===apiKey&&isValidKey){onClose();return;}setIsSaving(true);setApiKey(key);const isValid=await validateKey();setIsSaving(false);if(isValid){onClose();}};// Mask API key for display\nconst displayKey=key=>{if(!key)return'';if(showKey)return key;return`${key.substring(0,3)}...${key.substring(key.length-4)}`;};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-dark-700 rounded-lg shadow-xl p-6 max-w-md w-full transition-all duration-200\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(KeyIcon,{className:\"h-5 w-5 text-primary-500\"}),\"OpenAI API Settings\"]}),error&&/*#__PURE__*/_jsx(ErrorAlert,{message:error,onDismiss:resetError}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"apiKey\",className:\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-100\",children:\"OpenAI API Key\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:showKey?\"text\":\"password\",id:\"apiKey\",className:\"input pr-24\",placeholder:\"sk-...\",value:key,onChange:e=>setKey(e.target.value)}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-y-0 right-0 flex items-center pr-3\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowKey(!showKey),className:\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\",children:showKey?'Hide':'Show'})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500 dark:text-gray-400\",children:isValidKey?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-green-600 dark:text-green-400\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4 mr-1\"}),\"Valid API key\"]}):apiKey?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center text-red-600 dark:text-red-400\",children:[/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-4 w-4 mr-1\"}),\"Invalid API key\"]}):\"Enter your OpenAI API key to use GPT\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 dark:bg-dark-600 p-3 rounded-md text-sm text-gray-700 dark:text-gray-300\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Get your API key from \",/*#__PURE__*/_jsx(\"a\",{href:\"https://platform.openai.com/api-keys\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"text-primary-600 dark:text-primary-400 hover:underline\",children:\"OpenAI's platform\"}),\".\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1\",children:\"Your API key is stored locally in your browser and never sent to our servers.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex gap-3 justify-end\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline\",onClick:onClose,disabled:isSaving,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSave,disabled:isSaving||isLoading||!key,children:isSaving||isLoading?/*#__PURE__*/_jsx(LoadingSpinner,{size:\"sm\"}):'Save Key'})]})]})});};export default OpenAISettings;","map":{"version":3,"names":["React","useState","useOpenAI","KeyIcon","CheckCircleIcon","XCircleIcon","ErrorAlert","LoadingSpinner","jsx","_jsx","jsxs","_jsxs","OpenAISettings","_ref","onClose","apiKey","isValidKey","isLoading","error","setApiKey","validateKey","resetError","key","setKey","isSaving","setIsSaving","showKey","setShowKey","handleSave","isValid","displayKey","substring","length","className","children","message","onDismiss","htmlFor","type","id","placeholder","value","onChange","e","target","onClick","href","rel","disabled","size"],"sources":["C:/Users/alamk/OneDrive/Desktop/Chatbot/chatbot-app/src/components/OpenAISettings.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useOpenAI } from '../hooks/useOpenAI';\r\nimport { KeyIcon, CheckCircleIcon, XCircleIcon } from '@heroicons/react/24/outline';\r\nimport ErrorAlert from './ErrorAlert';\r\nimport LoadingSpinner from './LoadingSpinner';\r\n\r\ninterface OpenAISettingsProps {\r\n  onClose: () => void;\r\n}\r\n\r\nconst OpenAISettings: React.FC<OpenAISettingsProps> = ({ onClose }) => {\r\n  const { apiKey, isValidKey, isLoading, error, setApiKey, validateKey, resetError } = useOpenAI();\r\n  const [key, setKey] = useState(apiKey);\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const [showKey, setShowKey] = useState(false);\r\n\r\n  const handleSave = async () => {\r\n    if (key === apiKey && isValidKey) {\r\n      onClose();\r\n      return;\r\n    }\r\n\r\n    setIsSaving(true);\r\n    setApiKey(key);\r\n    const isValid = await validateKey();\r\n    setIsSaving(false);\r\n    \r\n    if (isValid) {\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  // Mask API key for display\r\n  const displayKey = (key: string) => {\r\n    if (!key) return '';\r\n    if (showKey) return key;\r\n    return `${key.substring(0, 3)}...${key.substring(key.length - 4)}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50\">\r\n      <div className=\"bg-white dark:bg-dark-700 rounded-lg shadow-xl p-6 max-w-md w-full transition-all duration-200\">\r\n        <h2 className=\"text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2\">\r\n          <KeyIcon className=\"h-5 w-5 text-primary-500\" />\r\n          OpenAI API Settings\r\n        </h2>\r\n        \r\n        {error && (\r\n          <ErrorAlert \r\n            message={error} \r\n            onDismiss={resetError} \r\n          />\r\n        )}\r\n        \r\n        <div className=\"space-y-4 mt-4\">\r\n          <div>\r\n            <label htmlFor=\"apiKey\" className=\"block mb-2 text-sm font-medium text-gray-900 dark:text-gray-100\">\r\n              OpenAI API Key\r\n            </label>\r\n            <div className=\"relative\">\r\n              <input\r\n                type={showKey ? \"text\" : \"password\"}\r\n                id=\"apiKey\"\r\n                className=\"input pr-24\"\r\n                placeholder=\"sk-...\"\r\n                value={key}\r\n                onChange={(e) => setKey(e.target.value)}\r\n              />\r\n              <div className=\"absolute inset-y-0 right-0 flex items-center pr-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowKey(!showKey)}\r\n                  className=\"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\r\n                >\r\n                  {showKey ? 'Hide' : 'Show'}\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\r\n              {isValidKey ? (\r\n                <span className=\"flex items-center text-green-600 dark:text-green-400\">\r\n                  <CheckCircleIcon className=\"h-4 w-4 mr-1\" />\r\n                  Valid API key\r\n                </span>\r\n              ) : apiKey ? (\r\n                <span className=\"flex items-center text-red-600 dark:text-red-400\">\r\n                  <XCircleIcon className=\"h-4 w-4 mr-1\" />\r\n                  Invalid API key\r\n                </span>\r\n              ) : (\r\n                \"Enter your OpenAI API key to use GPT\"\r\n              )}\r\n            </p>\r\n          </div>\r\n          \r\n          <div className=\"bg-gray-50 dark:bg-dark-600 p-3 rounded-md text-sm text-gray-700 dark:text-gray-300\">\r\n            <p>Get your API key from <a href=\"https://platform.openai.com/api-keys\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-primary-600 dark:text-primary-400 hover:underline\">OpenAI's platform</a>.</p>\r\n            <p className=\"mt-1\">Your API key is stored locally in your browser and never sent to our servers.</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"mt-6 flex gap-3 justify-end\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-outline\"\r\n            onClick={onClose}\r\n            disabled={isSaving}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={handleSave}\r\n            disabled={isSaving || isLoading || !key}\r\n          >\r\n            {isSaving || isLoading ? (\r\n              <LoadingSpinner size=\"sm\" />\r\n            ) : (\r\n              'Save Key'\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OpenAISettings; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}